// Generator - Creates the Prisma Client
generator client {
  provider = "prisma-client-js"
}

// Datasource - Tells prisma where our database is
datasource db {
  provider = "postgresql" // We are using PostgreSQL
  url      = env("DATABASE_URL") // Read connection string from .env
}

// User model - Represents a registered user
model User {
  id        String   @id @default(uuid())
  name      String
  phone     String   @unique
  email     String?
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  // Relationships - How this table connects to others
  contacts  Contact[] // One user can have many contacts
  spamReports SpamReport[] // One user can report many spam numbers 

  // Indexes - Make searches faster
  @@index([phone])  // Index on phone for quick lookups
  @@index([name])   // Index on name for search functionality
}

model Contact {
  id      String @id @default(uuid())
  ownerId String
  name    String
  phone   String
  owner   User   @relation(fields: [ownerId], references: [id])
}

model SpamReport {
  id         String   @id @default(uuid())
  phone      String
  reportedBy String
  createdAt  DateTime @default(now())
}
